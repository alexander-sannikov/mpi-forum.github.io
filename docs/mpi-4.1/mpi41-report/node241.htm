<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-topol/topol-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi4-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi41-report-html.idx -basedef mpi4defs.txt -o mpi41-report.tex mpi-report.tex 
-->
<title>An Application Example</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h1><span id="Node241">9.9. An Application Example</span></h1>
<a href="node240.htm#Node240"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node218.htm#Node218"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node242.htm#Node242"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node218.htm#Node218"> Virtual Topologies for <font face="sans-serif"> MPI</font> Processes</a>
<b>Next: </b><a href="node242.htm#Node242"> <font face="sans-serif"> MPI</font> Environmental Management</a>
<b>Previous: </b><a href="node240.htm#Node240"> Persistent Neighborhood Alltoall</a>
<p>
  
<P> 
<br><b> Example</b>  
  
Neighborhood collective communication in a Cartesian virtual topology.  
<P> 
The example in   
Figures <a href="node241.htm#Node241">An Application Example</a>--<a href="node241.htm#Node241">An Application Example</a>  
shows how the grid definition and  
inquiry functions can be used in an application program. A partial  
differential equation, for instance the Poisson equation, is to be  
solved on a rectangular domain.  
First, the <font face="sans-serif"> MPI</font> processes organize themselves in a two-dimensional  
structure. Each <font face="sans-serif"> MPI</font> process then inquires about the ranks of its  
neighbors in the four directions (up, down, right, left).  
The numerical problem is solved by an iterative method, the details  
of which are hidden in the subroutine <tt>relax</tt>.  
<P> 
In each relaxation step each <font face="sans-serif"> MPI</font> process computes new values for the solution grid  
function at the points <tt>u(1:100,1:100)</tt>  
owned by the <font face="sans-serif"> MPI</font> process. Then the values at inter-process  
boundaries have to be exchanged with neighboring <font face="sans-serif"> MPI</font> processes.  
For example, the  
newly calculated values in <tt>u(1,1:100)</tt>  
must be sent into the halo cells <tt>u(101,1:100)</tt>  
of the left-hand neighbor with coordinates <tt>(own_coord(1)-1,own_coord(2))</tt>.  
  
<P> 
<P><span id="node234.htm#Equation23"><img width=870 height=732 src="img325.gif" alt="Image file"></span><P>
<br> 
Set-up of <font face="sans-serif"> MPI</font> process structure for two-dimensional 
parallel Poisson solver<P> 
  
  
<P><span id="node234.htm#Equation23"><img width=828 height=732 src="img326.gif" alt="Image file"></span><P>
<br> 
Communication routine with local data copying and sparse neighborhood alltoall<P> 
  
<P><span id="node234.htm#Equation23"><img width=882 height=846 src="img327.gif" alt="Image file"></span><P>
<br> 
Communication routine with sparse neighborhood alltoallw and without local data copying<P> 
  
  
<P><span id="node234.htm#Equation23"><img width=856 height=1146 src="img328.gif" alt="Image file"></span><P>
<br> 
Two-dimensional parallel Poisson solver with persistent sparse neighborhood alltoallw and without local data copying<P> 
  
  
  
<P> 
  

<P>
<hr>
<a href="node240.htm#Node240"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node218.htm#Node218"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node242.htm#Node242"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node218.htm#Node218"> Virtual Topologies for <font face="sans-serif"> MPI</font> Processes</a>
<b>Next: </b><a href="node242.htm#Node242"> <font face="sans-serif"> MPI</font> Environmental Management</a>
<b>Previous: </b><a href="node240.htm#Node240"> Persistent Neighborhood Alltoall</a>
<p>
<HR>
Return to <A HREF="node601.htm">MPI-4.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-4.1 of November 2, 2023<BR>
HTML Generated on November 19, 2023
</FONT>
</body>
</html>
