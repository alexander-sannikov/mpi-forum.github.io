<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-context/context-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi4-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi41-report-html.idx -basedef mpi4defs.txt -o mpi41-report.tex mpi-report.tex 
-->
<title>Library Example #2</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node197">8.5.6. Library Example #2</span></h2>
<a href="node196.htm#Node196"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node191.htm#Node191"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node198.htm#Node198"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node191.htm#Node191"> Motivating Examples</a>
<b>Next: </b><a href="node198.htm#Node198"> Inter-Communication</a>
<b>Previous: </b><a href="node196.htm#Node196"> Library Example #1</a>
<p>
<br><b> Example</b>  
  
Second library example  
<P> 
 The main program:  
<P><img width=754 height=1221 src="img277.gif" alt="Image file"><P>
 The library:  
<P><img width=816 height=549 src="img278.gif" alt="Image file"><P>
The above example is three examples, depending on whether or  
not one includes rank 3 in <font face="sans-serif"> list_b</font>, and whether or not a  
synchronizing operation is included in <font face="sans-serif"> lib_call</font>. This example illustrates  
that, despite contexts, subsequent calls to <font face="sans-serif"> lib_call</font> with the  
same context need not be safe from one another (colloquially,  
``back-masking''). Safety is realized if a call to <font face="sans-serif"> MPI_Barrier</font> is  
added. What this demonstrates is that libraries have to be written  
carefully, even with contexts. When rank 3 is excluded, then  
the synchronizing operation is not needed to get safety from  
back-masking.  
<P> 
Algorithms like ``reduce'' and ``allreduce'' have strong enough source  
selectivity properties so that they are inherently okay (no  
back-masking),  
provided that <font face="sans-serif"> MPI</font> provides basic guarantees. So are multiple calls to a  
typical tree-broadcast algorithm with the same root or different roots  
(see [<a href="node600.htm#-Bib65">65</a>]).  
Here we rely on two guarantees of <font face="sans-serif"> MPI</font>: pairwise ordering of  
messages between <font face="sans-serif"> MPI</font> processes in the same context, and source  
selectivity---deleting either feature removes the guarantee that  
back-masking cannot  
be required.  
<P> 
Algorithms that try to do nondeterministic broadcasts or other calls that  
include wildcard operations will not generally have the good properties of the  
deterministic implementations of ``reduce,'' ``allreduce,'' and ``broadcast.''  
Such algorithms would have to utilize the monotonically increasing tags  
(within a communicator scope) to keep things straight.  
<P> 
All of the foregoing is a supposition of ``collective calls'' implemented with  
point-to-point operations. <font face="sans-serif"> MPI</font> implementations may or may not implement  
collective calls using point-to-point operations. These algorithms are used  
to illustrate the issues of correctness and safety, independent of how <font face="sans-serif"> MPI</font>  
implements its collective calls. See also Section <a href="node212.htm#Node212">Formalizing the Loosely Synchronous Model</a>.  
  
<P> 

<P>
<hr>
<a href="node196.htm#Node196"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node191.htm#Node191"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node198.htm#Node198"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node191.htm#Node191"> Motivating Examples</a>
<b>Next: </b><a href="node198.htm#Node198"> Inter-Communication</a>
<b>Previous: </b><a href="node196.htm#Node196"> Library Example #1</a>
<p>
<HR>
Return to <A HREF="node601.htm">MPI-4.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-4.1 of November 2, 2023<BR>
HTML Generated on November 19, 2023
</FONT>
</body>
</html>
